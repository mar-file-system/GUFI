$ gufi_find --help
Usage: gufi_find [-P] [path...] [expression]

default path is the index root directory specified in the configuration file
expression may consist of:

    amin anewer atime cmin cnewer
    ctime empty executable false fprint
    gid group help iname inum
    iregex links lname ls maxdepth
    mindepth mmin mtime name newer
    path printf readable regex samefile
    size true type uid user
    writable

GUFI Specific Flags (--):

    numresults largest smallest

Report (and track progress on fixing) bugs to the GitHub Issues
page at https://github.com/mar-file-system/GUFI/issues

$ gufi_find -H 2>&1 >/dev/null
Found flag H. Ignoring.

$ gufi_find -L 2>&1 >/dev/null
Found flag L. Ignoring.

$ gufi_find -P 2>&1 >/dev/null

$ gufi_find -D 2>&1 >/dev/null
Found flag D. Ignoring.

$ gufi_find -O 2>&1 >/dev/null
Found flag O. Ignoring.

$ gufi_find
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -amin +0
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -anewer not_as_old_file
1KB
1MB

$ gufi_find -atime +0
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -cmin +0
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -cnewer not_as_old_file

$ gufi_find -ctime +0
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -empty
old_file

$ gufi_find -executable
prefix
directory
directory/executable
directory/subdirectory
directory/subdirectory/directory_symlink
file_symlink
leaf_directory
unusual#? directory ,

$ gufi_find -false

$ gufi_find -iname 'LEAF'
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2

$ gufi_find -inum 7
directory

$ gufi_find -inum 0
old_file

$ gufi_find -inum 8
file_symlink

$ gufi_find -iregex 'LEAF'
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2

$ gufi_find -links 1 -type f
.hidden
1KB
1MB
directory/executable
directory/readonly
directory/subdirectory/repeat_name
directory/writable
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,/unusual, name?#

$ gufi_find -lname 'directory*'
directory/subdirectory/directory_symlink

$ gufi_find -lname 'file*'
file_symlink


$ gufi_find -ls
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 .hidden
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 1KB
0 0 -rw-rw-r-- 1 user group 0 Jan 13 1970 1MB
0 0 drwxrwxr-x 1 user group 0 Jan 01 1970 directory
0 0 lrwxrwxrwx 1 user group 0 Jan 01 1970 directory_symlink -> directory/subdirectory
0 0 -rwxrwxrwx 1 user group 0 Jan 01 1970 executable
0 0 lrwxrwxrwx 1 user group 0 Jan 01 1970 file_symlink -> 1KB
0 0 drwxrwxr-x 1 user group 0 Jan 01 1970 leaf_directory
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 leaf_file1
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 leaf_file2
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 old_file
0 0 drwxrwxr-x 1 user group 0 Jan 01 1970 prefix
0 0 -r--r--r-- 1 user group 0 Jan 01 1970 readonly
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 repeat_name
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 repeat_name
0 0 drwxrwxr-x 1 user group 0 Jan 01 1970 subdirectory
0 0 drwxrwxr-x 1 user group 0 Jan 01 1970 unusual#? directory ,
0 0 -rw-rw-r-- 1 user group 0 Jan 01 1970 unusual, name?#
0 0 -rw-rw-rw- 1 user group 0 Jan 01 1970 writable

$ gufi_find -maxdepth 2
prefix
.hidden
1KB
1MB
file_symlink
old_file
repeat_name

$ gufi_find -mindepth 3
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name

$ gufi_find -mmin  +0
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -mtime +0
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -name  'directory*'
directory
directory/subdirectory/directory_symlink

$ gufi_find -name  'file*'
file_symlink

$ gufi_find -newer 'not_as_old_file'
1KB
1MB

$ gufi_find -path  '*directory*'
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -readable
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -regex '.*/directory.*'
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable

$ gufi_find -regex '.*/file.*'
file_symlink

$ gufi_find -samefile 'directory/subdirectory'
directory/subdirectory

$ gufi_find -samefile 'directory/subdirectory/repeat_name'
directory/subdirectory/repeat_name

$ gufi_find -size +1 -size=-3 -type f
1KB

$ gufi_find -size +1024c      -type f
1MB

$ gufi_find -size +1c         -type f
.hidden
1KB
1MB
directory/readonly
directory/subdirectory/repeat_name
directory/writable
leaf_directory/leaf_file1
leaf_directory/leaf_file2
repeat_name
unusual#? directory ,/unusual, name?#

$ gufi_find -size 1c          -type f
directory/executable

$ gufi_find -size 2048        -type f
1MB

$ gufi_find -size=-1c         -type f
old_file

$ gufi_find -true
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -type d
prefix
directory
directory/subdirectory
leaf_directory
unusual#? directory ,

$ gufi_find -type f
.hidden
1KB
1MB
directory/executable
directory/readonly
directory/subdirectory/repeat_name
directory/writable
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,/unusual, name?#

$ gufi_find -type l
directory/subdirectory/directory_symlink
file_symlink

$ gufi_find -writable
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -printf ''

$ gufi_find -printf '\141 \142 \143' | head -n 1
abc

$ gufi_find -printf '[\a][ \b][\f][\n][\r][\t][\v][\\\\]' -maxdepth 2 -type d
[][ ][][
][][	][][\\]

$ gufi_find -printf '%-22f %+22f'
.hidden                               .hidden
1KB                                       1KB
1MB                                       1MB
directory                           directory
directory_symlink           directory_symlink
executable                         executable
file_symlink                     file_symlink
leaf_directory                 leaf_directory
leaf_file1                         leaf_file1
leaf_file2                         leaf_file2
old_file                             old_file
prefix                                 prefix
readonly                             readonly
repeat_name                       repeat_name
repeat_name                       repeat_name
subdirectory                     subdirectory
unusual#? directory ,   unusual#? directory ,
unusual, name?#               unusual, name?#
writable                             writable

$ gufi_find -fprint gufi_query.fprint && cat gufi_query.fprint
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -printf '%z %z \z' -maxdepth 2 -type d
%z %z \z

$ gufi_find --numresults 5
prefix
.hidden
1KB
1MB
directory

$ gufi_find --smallest -type f
old_file
directory/executable
directory/readonly
directory/writable
directory/subdirectory/repeat_name
.hidden
leaf_directory/leaf_file1
leaf_directory/leaf_file2
repeat_name
unusual#? directory ,/unusual, name?#
1KB
1MB

$ gufi_find --largest  -type f
1MB
1KB
unusual#? directory ,/unusual, name?#
repeat_name
leaf_directory/leaf_file2
leaf_directory/leaf_file1
.hidden
directory/subdirectory/repeat_name
directory/writable
directory/readonly
directory/executable
old_file

$ gufi_find --verbose --largest -type f
GUFI query is
   gufi_query \
    -n 1 \
    -B 4096 \
    -a \
    -d ' ' \
    -I 'CREATE TABLE out (name TEXT, size INT64, type TEXT)' \
    -S 'INSERT INTO out SELECT rpath(sname, sroll), size, type FROM vrsummary WHERE ((type == '"'"'f'"'"')) ORDER BY size DESC, name ASC' \
    -E 'INSERT INTO out SELECT rpath(sname, sroll) || '"'"'/'"'"' || name, size, type FROM vrpentries WHERE ((type == '"'"'f'"'"')) ORDER BY size DESC, name ASC' \
    -J 'INSERT INTO aggregate SELECT name, size, type FROM out WHERE ((type == '"'"'f'"'"')) ORDER BY size DESC, name ASC' \
    -K 'CREATE TABLE aggregate (name TEXT, size INT64, type TEXT)' \
    -G 'SELECT name FROM aggregate WHERE ((type == '"'"'f'"'"')) ORDER BY size DESC, name ASC' \
    prefix
1MB
1KB
unusual#? directory ,/unusual, name?#
repeat_name
leaf_directory/leaf_file2
leaf_directory/leaf_file1
.hidden
directory/subdirectory/repeat_name
directory/writable
directory/readonly
directory/executable
old_file

$ gufi_find directory leaf_directory
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2

$ gufi_find -uid   1001
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -user  user
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -gid   1001
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find -group group
prefix
.hidden
1KB
1MB
directory
directory/executable
directory/readonly
directory/subdirectory
directory/subdirectory/directory_symlink
directory/subdirectory/repeat_name
directory/writable
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_query -a -w -E "UPDATE entries SET inode = 0, uid = 0, gid = 0;" "prefix"


$ gufi_find -printf "%% %a %b %c %d %k %g %u %D %f %G %h %i %m %M %n %p %P %s %t %U %y" -type f
% 0 0 0 2 0 0 0 - old_file 0 old_file 0 664 -rw-rw-r-- 1 old_file old_file 0 0 0 f
% 1 0 1 3 0 0 0 - executable 0 directory/executable 0 777 -rwxrwxrwx 1 directory/executable directory/executable 1 1 0 f
% 2 0 2 3 0 0 0 - readonly 0 directory/readonly 0 444 -r--r--r-- 1 directory/readonly directory/readonly 2 2 0 f
% 3 0 3 3 0 0 0 - writable 0 directory/writable 0 666 -rw-rw-rw- 1 directory/writable directory/writable 3 3 0 f
% 5 0 5 4 0 0 0 - repeat_name 0 directory/subdirectory/repeat_name 0 664 -rw-rw-r-- 1 directory/subdirectory/repeat_name directory/subdirectory/repeat_name 5 5 0 f
% 9 0 9 2 0 0 0 - .hidden 0 .hidden 0 664 -rw-rw-r-- 1 .hidden .hidden 9 9 0 f
% 10 0 10 3 0 0 0 - leaf_file1 0 leaf_directory/leaf_file1 0 664 -rw-rw-r-- 1 leaf_directory/leaf_file1 leaf_directory/leaf_file1 10 10 0 f
% 11 0 11 3 0 0 0 - leaf_file2 0 leaf_directory/leaf_file2 0 664 -rw-rw-r-- 1 leaf_directory/leaf_file2 leaf_directory/leaf_file2 11 11 0 f
% 13 0 13 2 0 0 0 - repeat_name 0 repeat_name 0 664 -rw-rw-r-- 1 repeat_name repeat_name 13 13 0 f
% 14 0 14 3 0 0 0 - unusual, name?# 0 unusual#? directory ,/unusual, name?# 0 664 -rw-rw-r-- 1 unusual#? directory ,/unusual, name?# unusual#? directory ,/unusual, name?# 14 14 0 f
% 1024 0 1024 2 0 0 0 - 1KB 0 1KB 0 664 -rw-rw-r-- 1 1KB 1KB 1024 1024 0 f
% 1048576 0 1048576 2 0 0 0 - 1MB 0 1MB 0 664 -rw-rw-r-- 1 1MB 1MB 1048576 1048576 0 f

$ gufi_find -empty path_after_expression
Traceback (most recent call last):
  File "scripts/gufi_find", line n, in run
    raise RuntimeError('gufi_find: unknown predicate `{0}\''.format(unknown[0]))
RuntimeError: gufi_find: unknown predicate `path_after_expression'

$ gufi_find -atime abc
usage: gufi_find [-help] [-maxdepth levels] [-mindepth levels] [--version]
                 [-amin n] [-anewer file] [-atime n] [-cmin n] [-cnewer file]
                 [-ctime n] [-empty] [-executable] [-false] [-gid n]
                 [-group gname] [-iname pattern] [-inum n] [-iregex pattern]
                 [-links n] [-lname pattern] [-mmin n] [-mtime n]
                 [-name pattern] [-newer file] [-path pattern] [-readable]
                 [-regex pattern] [-samefile name] [-size n] [-true] [-type c]
                 [-uid n] [-user uname] [-writable] [-fprint file]
                 [-ls | -printf format] [--numresults n]
                 [--smallest | --largest] [--delim c] [--in-memory-name name]
                 [--aggregate-name name] [--skip-file filename] [--verbose]
gufi_find: error: argument -atime: abc is not a valid numeric argument

$ gufi_find -unknown-predicate
Traceback (most recent call last):
  File "scripts/gufi_find", line n, in run
    raise RuntimeError('gufi_find: unknown predicate `{0}\''.format(unknown[0]))
RuntimeError: gufi_find: unknown predicate `-unknown-predicate'

$ gufi_find --skip "skip"
prefix
.hidden
1KB
1MB
file_symlink
leaf_directory
leaf_directory/leaf_file1
leaf_directory/leaf_file2
old_file
repeat_name
unusual#? directory ,
unusual#? directory ,/unusual, name?#

$ gufi_find --skip "skip.bad"
Error: Cannot open skip file "skip.bad"
Error: Bad input skip list

